<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hirdetés feladása</title>
    <link rel="stylesheet" href="styles.css">
    <link href="https://fonts.googleapis.com/css2?family=EB+Garamond&display=swap" rel="stylesheet">
    <script src="https://apis.google.com/js/platform.js" async defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
</head>
<body>
    <header>
        <div class="header-content">
            <div class="header-large">MAG-TÁRHELY</div>
            <div class="header-small">
                <div>MEZŐGAZDASÁGI</div>
                <div>VÁLLALKOZÁS</div>
            </div>
        </div>
        <nav>
            <ul>
                <li><a href="index.html">Kezdőlap</a></li>
                <li><a href="rolunk.html">Rólunk</a></li>
                <li><a href="szolgaltatasok.html">Szolgáltatások</a></li>
                <li><a href="urlap.html">Űrlap</a></li>
                <li><a href="kispiac.html">Kispiac</a></li>
                <li><a href="kapcsolat.html">Kapcsolat</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="home">
            <h2>Hirdetés feladása</h2>
            <p>Hirdetések feltöltéséhez szükséges űrlap</p>

            <div class="form-container">
                <form id="adForm">
                    <label for="adContent">Hirdetés tartalma:</label>
                    <input type="text" id="adContent" name="adContent" required>

                    <label for="advertiserEmail">Email cím:</label>
                    <input type="email" id="advertiserEmail" name="advertiserEmail" required>

                    <label for="advertiserPhone">Telefonszám:</label>
                    <input type="tel" id="advertiserPhone" name="advertiserPhone" required>

                    <label for="adDate">Dátum:</label>
                    <input type="date" id="adDate" name="adDate" required>

                    <label for="adPrice">Ár (Ft):</label>
                    <input type="number" id="adPrice" name="adPrice" required>

                    <input type="submit" value="Hirdetés beküldése">
                </form>
            </div>

            <div id="adsContainer" class="ads-container">
                <h3>Aktuális hirdetések:</h3>
                <div id="adsList"></div>
            </div>
        </section>
    </main>

    <footer>
        <p>&copy; Frissítve: 2025</p>
    </footer>

    <script src="script.js"></script>
    document.getElementById('adForm').addEventListener('submit', function(event) {
    event.preventDefault();

    const adContent = document.getElementById('adContent').value;
    const advertiserEmail = document.getElementById('advertiserEmail').value;
    const advertiserPhone = document.getElementById('advertiserPhone').value;
    const adDate = document.getElementById('adDate').value;
    const adPrice = document.getElementById('adPrice').value;

    const adData = {
        'date': adDate,
        'adContent': adContent,
        'email': advertiserEmail,
        'phone': advertiserPhone,
        'price': adPrice
    };

    // Hirdetés adatok beküldése Google Sheets-be
    submitAdToGoogleSheets(adData);
});

// Hirdetés adatainak beküldése a Google Sheets-be
function submitAdToGoogleSheets(adData) {
    const url = 'https://script.google.com/macros/s/AKfycbzrDfJhTAzGoUSwtkrOXTWbfZp8uCcHOpRdwvIjI29TGl0l6NpooaQV0XB6TDC18LrX/exec';
    
    fetch(url, {
        method: 'POST',
        body: JSON.stringify(adData),
        headers: {
            'Content-Type': 'application/json'
        }
    })
    .then(response => response.json())
    .then(data => {
        console.log('Success:', data);
        alert('Hirdetés sikeresen feltöltve!');
        fetchAdsFromGoogleSheets(); // Hirdetések frissítése
    })
    .catch((error) => {
        console.error('Error:', error);
    });
}

// Google Sheetsből hirdetések lekérése
function fetchAdsFromGoogleSheets() {
    const url = 'https://script.google.com/macros/s/AKfycbzrDfJhTAzGoUSwtkrOXTWbfZp8uCcHOpRdwvIjI29TGl0l6NpooaQV0XB6TDC18LrX/exec?action=getAds';

    fetch(url)
        .then(response => response.json())
        .then(data => {
            displayAds(data);
        })
        .catch(error => console.error('Hiba történt a hirdetések lekérésekor:', error));
}

// Hirdetések megjelenítése
function displayAds(ads) {
    const adsList = document.getElementById('adsList');
    adsList.innerHTML = ''; // Törli az előző hirdetéseket

    ads.forEach(ad => {
        const adItem = document.createElement('div');
        adItem.className = 'ad-item';

        adItem.innerHTML = `
            <pre>Dátum: ${ad.date}</pre>
            <pre>Hirdetés: ${ad.adContent}</pre>
            <pre>Email: ${ad.email}</pre>
            <pre>Telefonszám: ${ad.phone}</pre>
            <pre>Ár: ${ad.price} Ft</pre>
        `;
        adsList.appendChild(adItem);
    });
}

// Hirdetések lekérése a kezdeti bet

</body>
</html>
